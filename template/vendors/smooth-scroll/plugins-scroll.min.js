(function(n){n.extend({browserSelector:function(){var m=navigator.userAgent.toLowerCase(),g=function(g){return-1<m.indexOf(g)},t=document.documentElement;c=[!/opera|webtv/i.test(m)&&/msie\s(\d)/.test(m)?"ie ie"+parseFloat(navigator.appVersion.split("MSIE")[1]):g("firefox/2")?"gecko ff2":g("firefox/3.5")?"gecko ff3 ff3_5":g("firefox/3")?"gecko ff3":g("gecko/index.html")?"gecko":g("opera")?"opera"+(/version\/(\d+)/.test(m)?" opera"+RegExp.jQuery1:/opera(\s|\/)(\d+)/.test(m)?" opera"+RegExp.jQuery2:
""):g("konqueror")?"konqueror":g("chrome")?"webkit chrome":g("iron")?"webkit iron":g("applewebkit/index.html")?"webkit safari"+(/version\/(\d+)/.test(m)?" safari"+RegExp.jQuery1:""):g("mozilla/index.html")?"gecko":"",g("j2me")?"mobile":g("iphone")?"iphone":g("ipod")?"ipod":g("mac")?"mac":g("darwin")?"mac":g("webtv")?"webtv":g("win")?"win":g("freebsd")?"freebsd":g("x11")||g("linux")?"linux":"","js"].join(" ");t.className+=" "+c}})})(jQuery);
(function(n){n.extend({smoothScroll:function(){function m(){var a=!1;-1<document.URL.indexOf("google.com/reader/view")&&(a=!0);if(h.excluded){var b=h.excluded.split(/[,\n] ?/);b.push("mail.google.com");for(var d=b.length;d--;)if(-1<document.URL.indexOf(b[d])){v&&v.disconnect();window.removeEventListener("mousewheel",n,!1);E=a=!0;break}}a&&window.removeEventListener("keydown",F,!1);h.keyboardSupport&&!a&&window.addEventListener("keydown",F,!1)}function g(){if(document.body){var a=document.body,b=document.documentElement,
d=window.innerHeight,f=a.scrollHeight;w=0<=document.compatMode.indexOf("CSS")?b:a;x=a;m();G=!0;if(top!=self)H=!0;else if(f>d&&(a.offsetHeight<=d||b.offsetHeight<=d)){var e=!1,f=function(){e||b.scrollHeight==document.height||(e=!0,setTimeout(function(){b.style.height=document.height+"px";e=!1},500))};b.style.height="auto";setTimeout(f,10);v=new M(f);v.observe(a,{attributes:!0,childList:!0,characterData:!1});w.offsetHeight<=d&&(d=document.createElement("div"),d.style.clear="both",a.appendChild(d))}-1<
document.URL.indexOf("mail.google.com")?(d=document.createElement("style"),d.innerHTML=".iu { visibility: hidden }",(document.getElementsByTagName("head")[0]||b).appendChild(d)):-1<document.URL.indexOf("www.facebook.com")&&(d=document.getElementById("home_stream"))&&(d.style.webkitTransform="translateZ(0)");h.fixedBackground||E||(a.style.backgroundAttachment="scroll",b.style.backgroundAttachment="scroll")}}function t(a,b,d,f){f||(f=1E3);N(b,d);if(1!=h.accelerationMax){var e=+new Date-z;e<h.accelerationDelta&&
(e=(1+30/e)/2,1<e&&(e=Math.min(e,h.accelerationMax),b*=e,d*=e));z=+new Date}u.push({x:b,y:d,lastX:0>b?.99:-.99,lastY:0>d?.99:-.99,start:+new Date});if(!A){var g=a===document.body,k=function(e){e=+new Date;for(var l=0,m=0,n=0;n<u.length;n++){var p=u[n],q=e-p.start,t=q>=h.animationTime,r=t?1:q/h.animationTime;h.pulseAlgorithm&&(q=r,1<=q?r=1:0>=q?r=0:(1==h.pulseNormalize&&(h.pulseNormalize/=I(1)),r=I(q)));q=p.x*r-p.lastX>>0;r=p.y*r-p.lastY>>0;l+=q;m+=r;p.lastX+=q;p.lastY+=r;t&&(u.splice(n,1),n--)}g?
window.scrollBy(l,m):(l&&(a.scrollLeft+=l),m&&(a.scrollTop+=m));b||d||(u=[]);u.length?J(k,a,f/h.frameRate+1):A=!1};J(k,a,0);A=!0}}function n(a){G||g();var b=a.target,d=K(b);if(!d||a.defaultPrevented||"embed"===(x.nodeName||"").toLowerCase()||"embed"===(b.nodeName||"").toLowerCase()&&/\.pdf/i.test(b.src))return!0;var b=a.wheelDeltaX||0,f=a.wheelDeltaY||0;b||f||(f=a.wheelDelta||0);var e;if(e=!h.touchpadSupport)if(e=f){e=Math.abs(e);l.push(e);l.shift();clearTimeout(O);e=l[0]==l[1]&&l[1]==l[2];var k=
B(l[0],120)&&B(l[1],120)&&B(l[2],120);e=!(e||k)}else e=void 0;if(e)return!0;1.2<Math.abs(b)&&(b*=h.stepSize/120);1.2<Math.abs(f)&&(f*=h.stepSize/120);t(d,-b,-f);a.preventDefault()}function F(a){var b=a.target,d=a.ctrlKey||a.altKey||a.metaKey||a.shiftKey&&a.keyCode!==k.spacebar;if(/input|textarea|select|embed/i.test(b.nodeName)||b.isContentEditable||a.defaultPrevented||d||"button"===(b.nodeName||"").toLowerCase()&&a.keyCode===k.spacebar)return!0;var f;f=b=0;var d=K(x),e=d.clientHeight;d==document.body&&
(e=window.innerHeight);switch(a.keyCode){case k.up:f=-h.arrowScroll;break;case k.down:f=h.arrowScroll;break;case k.spacebar:f=a.shiftKey?1:-1;f=-f*e*.9;break;case k.pageup:f=.9*-e;break;case k.pagedown:f=.9*e;break;case k.home:f=-d.scrollTop;break;case k.end:e=d.scrollHeight-d.scrollTop-e;f=0<e?e+10:0;break;case k.left:b=-h.arrowScroll;break;case k.right:b=h.arrowScroll;break;default:return!0}t(d,b,f);a.preventDefault()}function C(a,b){for(var d=a.length;d--;)D[L(a[d])]=b;return b}function K(a){var b=
[],d=w.scrollHeight;do{var f=D[L(a)];if(f)return C(b,f);b.push(a);if(d===a.scrollHeight){if(!H||w.clientHeight+10<d)return C(b,document.body)}else if(a.clientHeight+10<a.scrollHeight&&(overflow=getComputedStyle(a,"").getPropertyValue("overflow-y"),"scroll"===overflow||"auto"===overflow))return C(b,a)}while(a=a.parentNode)}function N(a,b){a=0<a?1:-1;b=0<b?1:-1;if(y.x!==a||y.y!==b)y.x=a,y.y=b,u=[],z=0}function B(a,b){return Math.floor(a/b)==a/b}function I(a){var b;a*=h.pulseScale;1>a?b=a-(1-Math.exp(-a)):
(b=Math.exp(-1),a=1-Math.exp(-(a-1)),b+=a*(1-b));return b*h.pulseNormalize}var h={frameRate:150,animationTime:700,stepSize:80,pulseAlgorithm:!0,pulseScale:8,pulseNormalize:1,accelerationDelta:20,accelerationMax:1,keyboardSupport:!0,arrowScroll:50,touchpadSupport:!0,fixedBackground:!0,excluded:""},E=!1,H=!1,y={x:0,y:0},G=!1,w=document.documentElement,x,v,l=[120,120,120],k={left:37,up:38,right:39,down:40,spacebar:32,pageup:33,pagedown:34,end:35,home:36},u=[],A=!1,z=+new Date,D={};setInterval(function(){D=
{}},1E4);var L=function(){var a=0;return function(b){return b.uniqueID||(b.uniqueID=a++)}}(),O,J=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(a,b,d){window.setTimeout(a,d||1E3/60)}}(),M=window.MutationObserver||window.WebKitMutationObserver;window.addEventListener("mousedown",function(a){x=a.target},!1);window.addEventListener("mousewheel",n,!1);window.addEventListener("load",g,!1)}})})(jQuery);
